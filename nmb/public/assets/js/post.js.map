{"version":3,"sources":["post.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"post.js","sourcesContent":["(function (window, document) {\n\n    new Vue({\n        el: '.posts-board',\n        data: {\n            posts: [],\n            board_id: \"0\",\n            page: \"1\",\n            post_id: \"0\",\n            board_obj: {},\n            paginate: {},\n            csrf_token: \"\"\n        },\n        ready: function(){\n          var options = {};\n          options.params = {\n            board_id: config.current_board,\n            page: config.current_page,\n            post_id: config.current_post_id\n          };\n          this.$set(\"board_id\", config.current_board);\n          this.$set(\"page\", Number(config.current_page));\n          this.$set(\"post_id\", Number(config.current_post_id));\n\n          this.$http.get('/api/v1/boards').then(function(response){\n            var board_obj = response.json();\n            this.$set(\"board_obj\", board_obj);\n\n          }, function(response){});\n\n          var url = \"/api/v1/posts\"\n          if(this.post_id > 0){\n            url = url + \"/\" + this.post_id;\n          }\n\n          this.$http.get(url, options).then(function(response){\n            // 文章列表\n            var post_list_obj = response.json();\n            // console.log(post_list_obj);\n            this.$set(\"posts\", post_list_obj.data);\n            this.$set(\"paginate\", post_list_obj.paginate);\n\n            this.$nextTick(function () {\n              // var all_lightbox = UIkit.lightbox(\".post.first > a[title='post image']\");\n              // var all_sub_lightbox = UIkit.lightbox(\".post.item > a[title='subpost image']\");\n              var pagination = UIkit.pagination(\n                                \".pagination > .uk-pagination\",\n                                {\n                                  \"pages\" : this.paginate.pages,\n                                  \"currentPage\" : this.paginate.current_page - 1,\n                                  \"onSelectPage\": this.reload_content\n                                }\n                              );\n            });\n\n\n\n            // // paginate url\n            // var base_paginate_url = \"/board/?\";\n            // base_paginate_url += \"board_id=\" + this.board_id;\n            // base_paginate_url += \"&\";\n            // base_paginate_url += \"post_id=\" + this.post_id;\n            //\n\n          }, function(response){});\n        },\n        methods:{\n          reload_content: function(page_index){\n            var page = page_index + 1;\n            var base_paginate_url = \"/board/?\";\n            base_paginate_url += \"board_id=\" + this.board_id;\n            base_paginate_url += \"&\";\n            base_paginate_url += \"post_id=\" + this.post_id;\n\n            page_url = base_paginate_url + \"&page=\" + page;\n\n            window.location.href = page_url;\n\n          },\n          report_post: function(post_id, content){\n            var url = \"/api/v1/reports\";\n\n            var options = {};\n            options.headers = {\n              \"X-CSRF-TOKEN\": this.csrf_token\n            };\n\n            var body = {\n              post_id: post_id,\n              content: content\n            }\n\n            this.$http.post(url, body, options).then(\n              function(response){\n                UIkit.notify({\n                  message : '举报成功...',\n                  status  : 'danger',\n                  timeout : 5000,\n                  pos     : 'top-right'\n                });\n                console.log(response);\n              },\n              function(response){}\n            );\n          },\n          report_post_model: function(event, post_id){\n            var vm = this;\n            UIkit.modal.prompt(\"举报理由:\", \"\", function(newvalue){\n              vm.report_post(post_id, newvalue);\n            });\n          }\n        }\n\n    });\n\n}(this, this.document));\n"],"sourceRoot":"/source/"}